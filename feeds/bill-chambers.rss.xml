<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>"The Personal Website &amp; Portfolio of Bill Chambers"</title><link>http://www.billchambers.me/</link><description></description><atom:link href="http://www.billchambers.me/feeds/bill-chambers.rss.xml" rel="self"></atom:link><lastBuildDate>Tue, 25 Nov 2014 00:00:00 +0100</lastBuildDate><item><title>Setting up PostgreSQL Support for the California Civic Data Coalition</title><link>http://www.billchambers.me/postgresql_support_california_civic_data.html</link><description>&lt;h1&gt;Background&lt;/h1&gt;
&lt;p&gt;First, I'd like to introduce the &lt;a href="http://www.californiacivicdata.org/"&gt;California Civic Data Coalition&lt;/a&gt;. They are self described as a loosely coupled team from the Los Angeles Times Data Desk, The Center for Investigative Reporting and Stanford's Computational Journalism Lab. &lt;/p&gt;
&lt;p&gt;I am not a part of the Los Angeles Times nor Stanford's computation Journalism Lab. However &lt;strong&gt;I am passionate about open data and leveraging my skills to help others.&lt;/strong&gt; So I decided to start contributing. I started off with a rather small change then decided to sink my teeth into PostgreSQL support.&lt;/p&gt;
&lt;p&gt;The aim of this document is to be a reference for others that may be challenged by similar feature development.&lt;/p&gt;
&lt;p&gt;As a final thought I would encourage anyone and everyone to contribute to open data projects. I learned a lot setting up this feature and there is a lot of room for further contributions.&lt;/p&gt;
&lt;h2&gt;Loading Textfile Data into MySQL vs PostgreSQL&lt;/h2&gt;
&lt;p&gt;Typically &lt;a href="https://www.djangoproject.com/"&gt;Django&lt;/a&gt; has a pretty strong background for supporting multiple databases so I figured that supporting one or another would be trivial, especially coming from MySQL. I was wrong.&lt;/p&gt;
&lt;p&gt;What you'll find below is a fairly detailed log of the changes that I made and why I wrote the code that I wrote. &lt;a href="https://github.com/california-civic-data-coalition/django-calaccess-raw-data/blob/master/calaccess_raw/management/commands/loadcalaccessrawfile.py"&gt;Feel free to take a look at the code.&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;First catch: LOAD DATA INFILE&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;We load our data using some fairly sophisticated Django management commands. Using MySQL's &lt;a href="http://dev.mysql.com/doc/refman/5.1/en/load-data.html"&gt;&lt;code&gt;INFILE&lt;/code&gt;&lt;/a&gt; support we bulk insert each file (while rearranging, cleaning, and renaming columns on the fly). Now PostgreSQL doesn't support &lt;code&gt;INFILE&lt;/code&gt; loading but they've got a derivative: &lt;a href="http://www.postgresql.org/docs/9.2/static/sql-copy.html"&gt;&lt;code&gt;COPY&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here's an example of a MySQL LOAD DATA INFO command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;LOAD&lt;/span&gt; &lt;span class="k"&gt;DATA&lt;/span&gt; &lt;span class="k"&gt;LOCAL&lt;/span&gt; &lt;span class="n"&gt;INFILE&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;file name&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;table&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="nb"&gt;Date&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;str_to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%m/%d/%Y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; 
&lt;span class="n"&gt;Time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; 
&lt;span class="n"&gt;WindVelocity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="n"&gt;WindDirection&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="n"&gt;WindCompass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="n"&gt;WindNorth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="n"&gt;WindEast&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="n"&gt;WindSamples&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SUBSTR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;var1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It's important to note all the &lt;code&gt;@var&lt;/code&gt; fanciness. That's what makes this so easy(ish).&lt;/p&gt;
&lt;h5&gt;Understanding PostgreSQL COPY&lt;/h5&gt;
&lt;p&gt;The problem is that &lt;code&gt;COPY&lt;/code&gt; in Postgres, from my interpretation, is meant for unloading to a text file then loading it back in without really performing any modifications. It doesn't have any of the dexterity shown above. Here's an example of a &lt;a href="http://www.postgresql.org/docs/9.2/static/sql-copy.html"&gt;&lt;code&gt;COPY&lt;/code&gt;&lt;/a&gt; command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;COPY&lt;/span&gt; &lt;span class="n"&gt;country&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/usr1/proj/bray/sql/country_data&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Obviously, we're not just unloading data and loading it back in. We are transforming dates and substrings, not to mention we are moving data from a completely different system into Postgres. That's where things get tricky, I can't format data on the fly, renaming columns isn't going to work. I don't have nearly as many tools as MySQL does.&lt;/p&gt;
&lt;h3&gt;First Attempt: Clean before Insert&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;So I figured I could write some little &lt;a href="https://www.python.org/"&gt;python&lt;/a&gt; script to clean the the data before inputting it. The problem is some of the files are huge (&amp;gt; 1gb) so I could not do it with anything resembling speed. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;So this attempt failed miserably, it was just too slow.&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Second Attempt: A Temporary Table&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;Things improved when I started creating a temporary table on the fly, inserting the data then applying transformations upon insert into the true table. Now there are a couple of tricks that I pulled off to be able to do this.&lt;/p&gt;
&lt;h3&gt;First Catch: DateTimes &amp;amp; Integers&lt;/h3&gt;
&lt;p&gt;I had to use some special case statements in postgres to be able to coerce these types when taking them from the temporary table to our new table.&lt;/p&gt;
&lt;p&gt;Now at this point. I'm feeling pretty good. I've got a couple of tables that are inserting without issue so I figure I'll move onto all the files.&lt;/p&gt;
&lt;h3&gt;Second Catch: Empty Columns and Not Null Constraints&lt;/h3&gt;
&lt;p&gt;The second catch was a bit more nuanced. Basically for certain tables, we added certain fields. I'm not quite sure &lt;em&gt;why&lt;/em&gt; these fields have been added but they have. Unfortunately we can't just ignore them because, although they are set like &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;intr_adr1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="il"&gt;55L&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;db_column&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;INTR_ADR1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;blank&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Unfortunately that doesn't mean they call be set to nothing so we've got to handle that case as well.&lt;/p&gt;
&lt;h3&gt;Third Catch: Boolean Fields&lt;/h3&gt;
&lt;p&gt;The third catch was boolean fields. In our database they're stored as "Y"/"N". Now this shouldn't cause a problem however we insert them as integers in our database. This isn't really covered in the documentation so I was just getting errors where my inserts would fail.&lt;/p&gt;
&lt;p&gt;Snooping around in my models showed me this code.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;accept_limit_yn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IntegerField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;db_column&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;ACCEPT_LIMIT_YN&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;blank&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That's clearly meant to be a yes/no field. So I had to modify my case statements to handle that. This is an example of accidental complexity - using the correct field type in our model could have allowed for a more graceful management of this information but instead we're adding another case statement to this insert.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;        &lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;CASE&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ACCEPT_LIMIT_YN&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ACCEPT_LIMIT_YN&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Y&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ACCEPT_LIMIT_YN&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;N&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ACCEPT_LIMIT_YN&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ACCEPT_LIMIT_YN&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;
        &lt;span class="k"&gt;END&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ACCEPT_LIMIT_YN&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Fourth Catch: Not being able to SELECT because of our modifications&lt;/h3&gt;
&lt;p&gt;This was an interesting one: here's the SQL.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

        &lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;CASE&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Y&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;N&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;
        &lt;span class="k"&gt;END&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt;

        &lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;CASE&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_TYPE&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_TYPE&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Y&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_TYPE&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;N&amp;#39;&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
            &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_TYPE&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
                &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_TYPE&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;
        &lt;span class="k"&gt;END&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;FILING_TYPE&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;temporary_table&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now &lt;code&gt;SELECT ""&lt;/code&gt; obviously isn't going to work. So I add a dummy column to the temporary table and the new table. I then remove it after the successful(or unsuccessful) insert.&lt;/p&gt;
&lt;h3&gt;Fifth Catch: Incorrect Lengths&lt;/h3&gt;
&lt;p&gt;MySQL using &lt;code&gt;LOAD DATA&lt;/code&gt; seems to automatically truncate fields. This made things complicated for me because PostgreSQL did no such thing. I had to find which fields were causing the issues and resolve them.&lt;/p&gt;
&lt;p&gt;When I would &lt;code&gt;grep&lt;/code&gt; certain files I'd see that there were plenty of fields causing issues. This is a great example (more can be seen in the &lt;a href="https://github.com/california-civic-data-coalition/django-calaccess-raw-data/issues/68"&gt;Github issue&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The python code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FilernameCd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CalAccessBaseModel&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;DATE_FIELDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;EFFECT_DT&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,)&lt;/span&gt;
    &lt;span class="n"&gt;xref_filer_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="il"&gt;7L&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;db_column&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;XREF_FILER_ID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;db_index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;help_text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;The external filer id saved in the forms tables&amp;quot;&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The relevant file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;head -1 filername_cd.csv
&lt;span class="s2"&gt;&amp;quot;XREF_FILER_ID&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;FILER_ID&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;FILER_TYPE&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;STATUS&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;EFFECT_DT&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;NAML&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;NAMF&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;NAMT&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;NAMS&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;ADR1&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;ADR2&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;CITY&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;ST&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;ZIP4&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;PHON&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;FAX&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;EMAIL&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;grep -E &lt;span class="s2"&gt;&amp;quot;R98\*-\d+&amp;quot;&lt;/span&gt; filername_cd.csv | wc -l
     609
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The grep data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="s2"&gt;&amp;quot;XREF_FILER_ID&amp;quot;&lt;/span&gt;,....
&lt;span class="s2"&gt;&amp;quot;R98*-185420615&amp;quot;&lt;/span&gt;,....
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally the same data in the MySQL db:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;XREF_FILER_ID&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;FILERNAME_CD&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;XREF_FILER_ID&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;R98*-18%&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="c1"&gt;---------------+&lt;/span&gt;
&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;XREF_FILER_ID&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="c1"&gt;---------------+&lt;/span&gt;
&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;R98&lt;/span&gt;&lt;span class="o"&gt;*-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;R98&lt;/span&gt;&lt;span class="o"&gt;*-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;R98&lt;/span&gt;&lt;span class="o"&gt;*-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;....&lt;/span&gt;
&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="c1"&gt;---------------+&lt;/span&gt;
&lt;span class="mi"&gt;29&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can see there the data is getting truncated. It's unfortunate there was no warning that it was but I think that's still a response to how PostgreSQL and MySQL respond to data inserts.&lt;/p&gt;
&lt;h3&gt;Sixth Catch: Incorrect Data (or data definitions)&lt;/h3&gt;
&lt;p&gt;So I'm running some of my final tests, end-to-end and I stumble upon this one.&lt;/p&gt;
&lt;p&gt;Here's where the issue occurs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt; Loading CvrRegistrationCd
dataerror error,  invalid input syntax &lt;span class="k"&gt;for &lt;/span&gt;integer: &lt;span class="s2"&gt;&amp;quot;01/0&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CvrRegistrationCd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CalAccessBaseModel&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="n"&gt;ls_beg_yr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IntegerField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;db_column&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;LS_BEG_YR&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;blank&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ls_end_yr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IntegerField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db_column&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;LS_END_YR&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;head -1 cvr_registration_cd.csv
&lt;span class="s2"&gt;&amp;quot;FILING_ID&amp;quot;&lt;/span&gt;...&lt;span class="s2"&gt;&amp;quot;RPT_DATE&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;LS_BEG_YR&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;LS_END_YR&amp;quot;&lt;/span&gt;....
&lt;span class="nv"&gt;$ &lt;/span&gt;grep &lt;span class="s2"&gt;&amp;quot;01/0&amp;quot;&lt;/span&gt; cvr_registration_cd.csv
&lt;span class="s2"&gt;&amp;quot;938431&amp;quot;&lt;/span&gt;...&lt;span class="s2"&gt;&amp;quot;6/7/2003 12:00:00 AM&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;01/0&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;12/3&amp;quot;&lt;/span&gt;...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It's one line in the file where the files should be integers but are instead &lt;strong&gt;"01/0","12/3"&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;This took a serious amount of time to be able to complete in an appropriate way.  Handling these edge cases is an important thing to do and when you're doing it in a system that will be used by a lot of others you have to be confident in what you're doing.&lt;/p&gt;
&lt;p&gt;Here's the process from a 10,000 foot view.
I create an empty table and insert all CSV data into that table. I then, through &lt;code&gt;INSERT INTO&lt;/code&gt; and &lt;code&gt;SELECT&lt;/code&gt; statements move that data from the temporary table into its true table. In this process I end up having to deal with a lot of unique cases not limited to integer fields being "Y/N", dates formatted in strange and inconsistent ways, and null constraints that are violated by the insert. These are all detailed in the methods like the one below.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_make_XXXXXXX_case&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_col&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;....&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I construct the insert and select statements differently as there are issues with column ordering, then attempt to insert - returning the errors with detailed reasoning. On my latest run, I experience no errors however I suspect that more will come up as data is added. In my last couple of pull requests we can see typical fields that cause these issues - I think this would be a great pull request/issue for someone new to Django.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Tue, 25 Nov 2014 00:00:00 +0100</pubDate><guid>tag:www.billchambers.me,2014-11-09:postgresql_support_california_civic_data.html</guid><category>OSS</category><category>Open Source Software</category><category>Civic Data</category><category>PostgreSQL</category></item><item><title>A Gentle Introduction to Static Site Generators</title><link>http://www.billchambers.me/introduction_to_static_site_generators.html</link><description>&lt;h1&gt;A Gentle Introduction to Static Site Generators&lt;/h1&gt;
&lt;p&gt;This document will be a simple introduction to static site generators. We'll go over the basics of what they are, why you should use them, which one you should use and finally how to get started.&lt;/p&gt;
&lt;p&gt;The intended audiences for this tutorial are designers or novice developers with little to no programming experience but with some HTML/CSS skill, simple command line experience. This document was originally written for a presentation I did for a portfolio class at the UC Berkeley School of Information. &lt;a href="https://docs.google.com/a/berkeley.edu/presentation/d/1vnIX6JzYBaHuWY914bSjlNvUoSg7-AB-LEJXM4NsCsI/edit?usp=sharing"&gt;You can see the presentation I made here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I'm using one on this website called &lt;a href="http://docs.getpelican.com/en/3.5.0/"&gt;Pelican&lt;/a&gt; but there are &lt;a href="https://staticsitegenerators.net/"&gt;many different kinds&lt;/a&gt;. Feel free to send me an email with any questions and I can recommend the best one for you.&lt;/p&gt;
&lt;h3&gt;What is a static site generator?&lt;/h3&gt;
&lt;p&gt;Simply a static site generator generates a static site. You give it a simple format of documents of a certain type and it converts those into HTML content for you. This makes it easy to maintain any changes you make to the underlying pages.&lt;/p&gt;
&lt;h5&gt;Let's work through &lt;strong&gt;the problem that it solves.&lt;/strong&gt;&lt;/h5&gt;
&lt;p&gt;I want a website or portfolio. I want to continue to add to it overtime and be able to make changes to my template and have those go to every single page of my website.&lt;/p&gt;
&lt;p&gt;If I just have raw html pages, changing every single one for every single page is a nightmare. If I want to change something like the layout, I'd have to copy and paste my content into every single one. I could use a web framework like Ruby on Rails or Django but then I have to deal with hosting and all the associated overhead and knowledge those things require. Additionally those require full fledged webservers (if you don't know what this is don't worry about it). You can &lt;a href="https://pages.github.com/"&gt;serve static sites for free.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Static site generators abstract the compilation of templates and source writing or documents.
3&lt;/p&gt;
&lt;h3&gt;How does it generate this information?&lt;/h3&gt;
&lt;p&gt;In simplest terms it takes a template of structure and layout and inserts the content you write in other formats into that template.&lt;/p&gt;
&lt;p&gt;I think the working example is easiest to understand.&lt;/p&gt;
&lt;p&gt;So you've got a directory like this: (this is just writing)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Articles&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;folder&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;my_article_about_stuff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;md&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;My_other_article_about&lt;/span&gt; &lt;span class="n"&gt;stuff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;md&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;ux_review&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;md&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Generates a folder structure like this: (that you can use to serve it)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;about&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;articles&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;my_article_about_stuff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;My_other_article_about&lt;/span&gt; &lt;span class="n"&gt;stuff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;ux_review&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That would give you a website like this: (that goes on the internet)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mywebsite&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;about&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;span class="n"&gt;mywebsite&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;span class="n"&gt;mywebsite&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;articles&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;my_article_about_stuff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;how does one get started?&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;THIS TUTORIAL IS INTENDED FOR MAC USERS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Let's get started with &lt;a href="http://jekyllrb.com/"&gt;Jekyll&lt;/a&gt;. It's the most popular static site generator and is fairly friendly.&lt;/p&gt;
&lt;p&gt;You'll need two things for these next steps:
- Your Favorite Text Editor (sublime text, text edit, etc.)
- A Terminal (search spotlight for terminal and open it up). &lt;/p&gt;
&lt;p&gt;From now on, anything you see in &lt;code&gt;code writing&lt;/code&gt; should be executed in the &lt;code&gt;terminal&lt;/code&gt; unless otherwise stated.&lt;/p&gt;
&lt;p&gt;On Mac run:
&lt;code&gt;gem install jekyll&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;if you have any problems you may need to run. Don't worry about what it's doing, it's just making sure everying you have is up to date.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rvm get stable
rvm osx-ssl-certs update all
rvm rubygems latest
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You may have to do this stuff with &lt;code&gt;sudo&lt;/code&gt; in front of it.&lt;/p&gt;
&lt;p&gt;Then finally run &lt;code&gt;gem install jekyll --source http://rubygems.org&lt;/code&gt; in the terminal.&lt;/p&gt;
&lt;p&gt;Now you've installed jekyll. What I always like to do is start with something and modifying it to meet my needs So we'll create a basic blog then go from there.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;jekyll&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;myblog&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;myblog&lt;/span&gt;
&lt;span class="n"&gt;jekyll&lt;/span&gt; &lt;span class="n"&gt;serve&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You'll see some text like. Again, not important what it says, just that it says something like this.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Configuration file: /sometext/myblog/_config.yml
            Source: /sometext/myblog
       Destination: /sometext/myblog/_site
      Generating... &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;span class="o"&gt;[&lt;/span&gt;2014-11-10 14:10:42&lt;span class="o"&gt;]&lt;/span&gt; INFO  WEBrick 1.3.1
&lt;span class="o"&gt;[&lt;/span&gt;2014-11-10 14:10:42&lt;span class="o"&gt;]&lt;/span&gt; INFO  ruby 2.0.0 &lt;span class="o"&gt;(&lt;/span&gt;2013-06-27&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;x86_64-darwin12.3.0&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;2014-11-10 14:10:42&lt;span class="o"&gt;]&lt;/span&gt; INFO  WEBrick::HTTPServer#start: &lt;span class="nv"&gt;pid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;62126 &lt;span class="nv"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;4000
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now go to &lt;a href="http://localhost:4000/"&gt;http://localhost:4000/&lt;/a&gt; and BOOM you've got a website.&lt;/p&gt;
&lt;p&gt;So let's dive into customizing the website a bit more.&lt;/p&gt;
&lt;p&gt;Take a look at the directory structure but it should be pretty self explanatory.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;_layouts&lt;/strong&gt; is where you've got the layouts. Typically you'll have a more navigation centric one then a more post centric one.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;_posts&lt;/strong&gt; is where you store...you guessed it. Any posts you want to publish.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;_site&lt;/strong&gt; is the actual website that jekyll generates. You'll see that it organizes things by date. &lt;em&gt;You will NEVER edit anything in here because it won't get saved permanently and you'll forget to do it next time.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;css&lt;/strong&gt; is where you store the css for your project. Most of what you'll be modifying will be &lt;strong&gt;main.css&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;index.html&lt;/strong&gt; is the base page for your website.&lt;/p&gt;
&lt;p&gt;Here's the code for &lt;strong&gt;index.html&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;---
layout: default
title: Your New Jekyll Site
---

&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Blog Posts&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;ul&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;posts&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    {% for post in site.posts %}
      &lt;span class="nt"&gt;&amp;lt;li&amp;gt;&amp;lt;span&amp;gt;&lt;/span&gt;{{ post.date | date_to_string }}&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="ni"&gt;&amp;amp;raquo;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{{ post.url }}&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;{{ post.title }}&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
    {% endfor %}
  &lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now remember, we making &lt;em&gt;your&lt;/em&gt; website so we need to customize it for you!&lt;/p&gt;
&lt;p&gt;In your terminal hit &lt;code&gt;control + c&lt;/code&gt; where you entered &lt;code&gt;jekyll serve&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;This will turn off the server you started above.&lt;/p&gt;
&lt;p&gt;Now run &lt;code&gt;jekyll serve --watch&lt;/code&gt;. What this allows us to do is make changes to our files and jekyll will see those changes and automatically change the files that we see on &lt;a href="http://localhost:4000/"&gt;http://localhost:4000/&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;Changing HTML&lt;/h4&gt;
&lt;p&gt;Open up &lt;strong&gt;index.html&lt;/strong&gt; in your text editor and let's make some changes.&lt;/p&gt;
&lt;p&gt;First, this isn't a blog, it's a portfolio. So I want to make two changes. I want to change the title and the text in the &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; tag. Here's what I changed in my &lt;strong&gt;index.html&lt;/strong&gt; file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;---
layout: default
title: Bill&amp;#39;s Fantastic Portfolio
---

&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Portfolio&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;ul&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;posts&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    {% for post in site.posts %}
      &lt;span class="nt"&gt;&amp;lt;li&amp;gt;&amp;lt;span&amp;gt;&lt;/span&gt;{{ post.date | date_to_string }}&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="ni"&gt;&amp;amp;raquo;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{{ post.url }}&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;{{ post.title }}&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
    {% endfor %}
  &lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now navigate to &lt;a href="http://localhost:4000/"&gt;http://localhost:4000/&lt;/a&gt; in your browser and refresh the page. You'll see the title is different now. &lt;/p&gt;
&lt;h4&gt;Changing CSS&lt;/h4&gt;
&lt;p&gt;Now let's say I want every &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; tag to be blue. That means changing some css, so I'll head over to &lt;strong&gt;main.css&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;and add one line at the end of the file&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;h1&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;blue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now go back to &lt;a href="http://localhost:4000/"&gt;http://localhost:4000/&lt;/a&gt; and you'll see that Portfolio on the page is now blue!&lt;/p&gt;
&lt;p&gt;You've now learned basically everything you need to know to run your own static site. 
- Change the home page by editing &lt;strong&gt;index.html&lt;/strong&gt;
- Change the styles in &lt;strong&gt;main.css&lt;/strong&gt;
- Add or edit your "posts" in &lt;strong&gt;_posts&lt;/strong&gt; by creating &lt;a href="http://daringfireball.net/projects/markdown/syntax"&gt;markdown&lt;/a&gt; files.
- To put this up on github pages check out this &lt;a href="https://help.github.com/articles/using-jekyll-with-pages/"&gt;tutorial&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Typically any questions you have will just be a Google away or &lt;a href="http://jekyllrb.com/docs/usage/"&gt;Check out the jekyll site for great documentation.&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;As a side note, when you're ready to finalize the version of the site that you want to run &lt;code&gt;jekyll build&lt;/code&gt;. This will put the final version in your _site which you can send up to your static host (like Github Pages).&lt;/em&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Tue, 11 Nov 2014 00:00:00 +0100</pubDate><guid>tag:www.billchambers.me,2014-11-05:introduction_to_static_site_generators.html</guid><category>Static Sites</category><category>Ruby</category><category></category></item><item><title>DataKindSF - Data Analysis for the Greater Good</title><link>http://www.billchambers.me/DataKindSF_data_for_good.html</link><description>&lt;p&gt;DataKindSF just got their start and the reception was incredible. There was a huge turn out of people wanting to contribute by using high impact skills for greater good. I found out about the program through &lt;a href="http://www.meetup.com/DataKind-SF-Bay-Area/"&gt;their meetup&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What I found particularly interesting about the whole thing was the vast possibilities for improving the ways that non-profits do business. At Procore, I helped guide the direction of our data quality and was a led the large scale reset of our data architecture and this kind of critical thinking could really make a difference for a lot of organizations.&lt;/p&gt;
&lt;p&gt;Volunteering is typically a low impact activity. It obviously impacts individuals but the possibility to impact others at scale is particularly intriguing!&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.datakind.org/getinvolved/"&gt;Sign up on their website&lt;/a&gt;.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Wed, 08 Oct 2014 00:00:00 +0200</pubDate><guid>tag:www.billchambers.me,2014-10-08:DataKindSF_data_for_good.html</guid><category>Data Science</category><category>Data</category><category>Non-Profits</category></item><item><title>WorldCupChatter.com - Graphing Tweets in Real Time</title><link>http://www.billchambers.me/World_Cup_Chatter.html</link><description>&lt;p&gt;This was my first production experience with Node.js. There Are definitely some really interesting things about JavaScript on the backend that allow you to take advantage of events. That is namely what I tried to do with this project. Learn a little bit more about node.js, about streaming data and analysis, and offloading responsibility to the client.&lt;/p&gt;
&lt;p&gt;The framework I used was &lt;a href="http://socket.io/"&gt;socket.io&lt;/a&gt;. My knowledge is certainly introductory but it provided a simple way for me to communicate real time data between the client's browser as well as the server. I wrote up a small intro on the site to allow people to understand what was happening&lt;/p&gt;
&lt;p&gt;&lt;img alt="World Cup Chatter Graph" src="/static/world_cup_chatter_intro.jpg" /&gt;&lt;/p&gt;
&lt;h3&gt;The Code&lt;/h3&gt;
&lt;p&gt;The server is incredibly simple and essentially boils down to this code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;io&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;connection&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;socket&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Connected...&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;tweet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;tweet&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;socket&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;emit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;new tweet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;tweet&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;TWEET&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With that server running we run everything else using D3.js to graph our tweets. The client runs a heavily modified version of &lt;a href="http://bost.ocks.org/mike/path/"&gt;Mike Bostock's path transitions examples&lt;/a&gt;. Concretely, every time the client receives a tweet from the server it pushes it to a list. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;socket&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;new tweet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;tweet&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;tweet&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;parseTwitterDate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;tweet&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;master_tweet_list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;tweet&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Received Tweet&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That list is then filtered (did the tweet occur in the last second) and pushed onto the relevant list every 'tick', or every second. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;master_tweet_list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;master_tweet_list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;within1Second2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;master_tweet_list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This all produces a graph like this as time continues.&lt;/p&gt;
&lt;p&gt;&lt;img alt="World Cup Chatter Graph" src="/static/world_cup_chatter.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;What's nice is D3.js provides us with some nice smoothing abilities, this allows us to smooth out the animation when we append to the list, the code is this. It's important to know that the x-axis moves with our data.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;d3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scale&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;domain&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Beyond this, the code is more or less boilerplate. Obviously there's some styling, some rolling up of the layout but more or less everything important was happening here.&lt;/p&gt;
&lt;h3&gt;Challenges &amp;amp; Take-Aways&lt;/h3&gt;
&lt;p&gt;Real-time data is hard. Period. Twitter scale is also hard. Period.&lt;/p&gt;
&lt;p&gt;I didn't have a lot of money to shell out for the server at this point so sending information to more than 10-15 clients at once reduced the ability for my server to send out tweets effectively to all clients. &lt;/p&gt;
&lt;p&gt;Another issue was memory leaks. When I would leave my browser open for an extended period of time, I found quality and degradation in my map and pushing functions. Trying to analyze the time of 10,000 tweets at once was difficult for a browser and took longer than a second. This caused my graphs to be off at certain periods of time.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/anabranch/World-Cup-Chatter"&gt;Check out the project on Github.&lt;/a&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Mon, 15 Sep 2014 00:00:00 +0200</pubDate><guid>tag:www.billchambers.me,2014-09-15:World_Cup_Chatter.html</guid><category>World Cup</category><category>Twitter</category><category>Node.js</category><category>D3.js</category></item><item><title>Evernote Hackathon</title><link>http://www.billchambers.me/Evernote_Hackathon_-_EverDone.html</link><description>&lt;p&gt;Wow, Hackathons are an experience. Firstly I was amazed by the turn out, realistically probably 40 teams all competed in a 12 hour hackathon for &lt;a href="http://www.evernote.com"&gt;Evernote&lt;/a&gt; at the &lt;a href="http://eecs.berkeley.edu"&gt;Computer Science Department at Berkeley&lt;/a&gt;. I found the atmosphere to be supportive and fiercely competitive at the same time. Hackathon's are a strange creation and I've struggled to come up with a parallel in history. But that's for another post.&lt;/p&gt;
&lt;h3&gt;The Application - EverDone&lt;/h3&gt;
&lt;p&gt;The project we worked on was Everdone. Simply put, EverDone is an organizational assistant. Every Saturday we'll collect your notes from the week and place them into the EverDone notebook for you to easily know what your tasks are for the week.&lt;/p&gt;
&lt;p&gt;One list.
All your tasks.&lt;/p&gt;
&lt;p&gt;We also implemented a hashtag based organizing system, so you can write something like "#homework finish my paper" and we'll categorize it under homework.&lt;/p&gt;
&lt;p&gt;The user flow is relatively straightforward, we start off with the main page and introduce the application.&lt;/p&gt;
&lt;p&gt;&lt;img alt="EverDone" src="/static/everdone_login.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;After the OAuth cycle, we need to get the user's email in order to send them their to do list every week.&lt;/p&gt;
&lt;p&gt;&lt;img alt="EverDone" src="/static/everdone_authorize.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Finally we give them an instant refresh, any to do created in the last week will get sent to their EverDone folder.&lt;/p&gt;
&lt;p&gt;&lt;img alt="EverDone" src="/static/everdone_success.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;You can check out the code on my &lt;a href="https://github.com/anabranch/Evernote-Hacks"&gt;Github&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;What did I learn?&lt;/h3&gt;
&lt;p&gt;I learned how intense hackathons are. it being my first one, I wasn't quite sure what to expect. There are a few shortcomings in our product that made it difficult for us to place.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It is incredible what we can be built in 13 hours.&lt;/li&gt;
&lt;li&gt;Our application, although built didn't demo very well. It's an invisible service that helps you keep track of your to dos. It wasn't something you would interact with directly, which we struggled to present effectively.&lt;/li&gt;
&lt;li&gt;You get nervous presenting in front of people. We didn't really prepare enough for our demonstration and were under-prepared.&lt;/li&gt;
&lt;li&gt;There are a lot of intelligent people at UC Berkeley!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There's also some interesting possibilities to building on this application. A mobile app integration could be a nice plus, if it basically pulled out all of your to dos, attached some metadata (which notebook &amp;amp; note) and you could organize them that way. Maybe some day!&lt;/p&gt;
&lt;p&gt;Overall I enjoyed the experience, and I think our application has real potential although we might need a pivot or two. I eagerly await my next Hackathon.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Wed, 10 Sep 2014 00:00:00 +0200</pubDate><guid>tag:www.billchambers.me,2014-09-10:Evernote_Hackathon_-_EverDone.html</guid><category>Product</category><category>Evernote</category><category>Hackathon</category><category>Python</category></item><item><title>SurpriseHaiku - Discovering Unusual Haikus On Twitter</title><link>http://www.billchambers.me/SurpriseHaiku.html</link><description>&lt;p&gt;This project is about 9 months old but it's still relevant and one that I wanted to write about now that I have this portfolio site.&lt;/p&gt;
&lt;h2&gt;About @SurpriseHaiku&lt;/h2&gt;
&lt;p&gt;SurpriseHaiku was an experiment that parsed random twitter tweets to see if they followed the Haiku cadence of 5 / 7 / 5 (syllables). I ran this experiment during the 2014 Olympics to try and focus around Olympics related tweets. This is one of my first applications (not scripts) that I built to learn more about the twitter API and to try some different packages.&lt;/p&gt;
&lt;p&gt;While the application is not running at this point, you can check out the historical tweets on &lt;a href="https://twitter.com/surprisehaiku"&gt;the twitter profile.&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Methodology&lt;/h3&gt;
&lt;p&gt;The simplest explanation is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Normalize the tweets text&lt;/li&gt;
&lt;li&gt;Split it by syllable/ each word by syllable&lt;/li&gt;
&lt;li&gt;see if we get a 5/7/5 combination&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Identifying the syllables on the English language is tough. We've got a lot of different ways of pronouncing things not to mention crazy spellings and dealing with other languages. I use two methods to split up syllables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use a dictionary of Hyphenated words&lt;/li&gt;
&lt;li&gt;Use a hyphenator&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I then compared those values, if we had a dictionary entry I would use it, if not I would use what the hyphenator spit out.&lt;/p&gt;
&lt;h3&gt;Tools&lt;/h3&gt;
&lt;p&gt;The tools I used in this project are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pypi.python.org/pypi/PyHyphen/2.0.5"&gt;PyHyphen&lt;/a&gt; which is the hyphenation library of LibreOffice and FireFox&lt;/li&gt;
&lt;li&gt;Tweepy for my Twitter API Integration&lt;/li&gt;
&lt;li&gt;Project Gutenberg Etext of Movy Hyphenator by Grady Ward (basically a dictionary of hyphenated words)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Notable Examples&lt;/h3&gt;
&lt;p&gt;Although not every tweet was successful, there were definitely some notable examples.&lt;/p&gt;
&lt;p&gt;This one really seems to flow although the sentence composition doesn't line up perfectly, the syllables do.
&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p&gt;A &lt;a href="https://twitter.com/hashtag/haiku?src=hash"&gt;#haiku&lt;/a&gt;: &lt;a href="https://t.co/Nn55PyBqab"&gt;https://t.co/Nn55PyBqab&lt;/a&gt;&amp;#10;&amp;#10;Lets Show Why Baseball&amp;#10;Is The Best Sport RT if&amp;#10;you want Baseball back&lt;/p&gt;&amp;mdash; SurpriseHaiku (@surprisehaiku) &lt;a href="https://twitter.com/surprisehaiku/status/432752455831392258"&gt;February 10, 2014&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/p&gt;
&lt;p&gt;I also ran this experiment during the Olympics, this one gave me a chuckle.
&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p&gt;A &lt;a href="https://twitter.com/hashtag/haiku?src=hash"&gt;#haiku&lt;/a&gt;: &lt;a href="https://t.co/zei5yF4E2D"&gt;https://t.co/zei5yF4E2D&lt;/a&gt;&amp;#10;&amp;#10;every time they show&amp;#10;putin i get really&amp;#10;uncomfortable&lt;/p&gt;&amp;mdash; SurpriseHaiku (@surprisehaiku) &lt;a href="https://twitter.com/surprisehaiku/status/432752315594842112"&gt;February 10, 2014&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/p&gt;
&lt;p&gt;As did this one
&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p&gt;A &lt;a href="https://twitter.com/hashtag/haiku?src=hash"&gt;#haiku&lt;/a&gt;: &lt;a href="https://t.co/2PpXgTSshU"&gt;https://t.co/2PpXgTSshU&lt;/a&gt;&amp;#10;&amp;#10;Russia Putin Poses&amp;#10;as Defender of Christian&amp;#10;Civilization&lt;/p&gt;&amp;mdash; SurpriseHaiku (@surprisehaiku) &lt;a href="https://twitter.com/surprisehaiku/status/432750753199820800"&gt;February 10, 2014&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/p&gt;
&lt;h3&gt;Challenges&lt;/h3&gt;
&lt;p&gt;As many know about natural language processing, it's really difficult. &lt;a href="http://people.ischool.berkeley.edu/~hearst/"&gt;Marti Hearst&lt;/a&gt;, my NLP professor at UC Berkeley has stressed that you can never get it all right and the more I've experimented the more I've realized that she is completely right.&lt;/p&gt;
&lt;p&gt;The challenges with this project is in NLP. Think of it this way, how do we know that RT means retweet without explicitly telling the computer that?&lt;/p&gt;
&lt;h3&gt;Improvements and take aways&lt;/h3&gt;
&lt;p&gt;I think there are a number of improvements that could be made but this was a short experiment, not a complete study.&lt;/p&gt;
&lt;p&gt;Firstly I think I could use some textual analysis to prevent tweets like this:&lt;/p&gt;
&lt;blockquote class="twitter-tweet" lang="en"&gt;&lt;p&gt;A &lt;a href="https://twitter.com/hashtag/haiku?src=hash"&gt;#haiku&lt;/a&gt;: &lt;a href="https://t.co/dnq4ji8nSw"&gt;https://t.co/dnq4ji8nSw&lt;/a&gt;&amp;#10;&amp;#10;I just dont see how&amp;#10;school is gonna be a part&amp;#10;of my life with the&lt;/p&gt;&amp;mdash; SurpriseHaiku (@surprisehaiku) &lt;a href="https://twitter.com/surprisehaiku/status/432738235840614400"&gt;February 10, 2014&lt;/a&gt;&lt;/blockquote&gt;

&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;The problem with this haiku is that it ends in "the". There's no continuity and it doesn't end logically. Using something like Markov Chains could help me out here.&lt;/p&gt;
&lt;p&gt;Other improvements include, automating deployment, ignoring tweets with a lot of gibberish or words that are likely to be wrong, automate adding new words to the dictionary, adding plurals to the dictionary.&lt;/p&gt;
&lt;p&gt;I learned a ton doing this project and hope to continue doing this sort of experimentation in the future.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Wed, 20 Aug 2014 00:00:00 +0200</pubDate><guid>tag:www.billchambers.me,2014-08-20:SurpriseHaiku.html</guid><category>Hyphenation</category><category>Twitter</category><category>Python</category><category>NLP</category></item><item><title>UX Review - Habits in Timeful</title><link>http://www.billchambers.me/UX_Review_-_Timeful_App.html</link><description>&lt;p&gt;Timeful team,&lt;/p&gt;
&lt;p&gt;Great application. I use it everyday, several times a day! I’m a beast at a to do list, I’m just not so good at scheduling things or getting them on a calendar. This brought me to Timeful. I wanted to declare what I wanted to do on certain days or weekly or monthly, and I wanted Timeful to help me fill that out. There doesn’t exist an application where I can have that list of to dos and drag them onto the calendar with such ease. That’s why I like Timeful so much. In using the application I noticed a small irregularity I’d like to submit.&lt;/p&gt;
&lt;p&gt;I wanted to provide some feedback and ask a small definitional question.&lt;/p&gt;
&lt;p&gt;Why do you display a habit (with defined preferred days) differently than a to do that has to occur on a certain day?&lt;/p&gt;
&lt;p&gt;I’ll show you how I’ve arrived at that question and you all can decide if it’s worth your time learning more about. This is not about the color of the application or anything, just about the placement of the habit on the calendar and not the daily list too.&lt;/p&gt;
&lt;p&gt;The issue really popped up around daily habits.&lt;/p&gt;
&lt;p&gt;&lt;img alt="To Dos" src="/static/timeful_review_1.png" /&gt;&lt;/p&gt;
&lt;p&gt;Let’s take the example of exercise and programming. These are two things that I have set up in the exact same way. I want to do them 7 times a week, every single day. Please keep in mind that when I set this up Timeful does not allow me to do more, you are reinforcing that this is something that is to happen every single day. The enforcement is so strong I can’t even create habits that should occur more than once a day. The screens below are the walk through of creating that exercise habit.&lt;/p&gt;
&lt;p&gt;&lt;img alt="To Dos" src="/static/timeful_review_2.png" /&gt;&lt;/p&gt;
&lt;p&gt;There’s reinforcement that this is to occur every single day on every screen.&lt;/p&gt;
&lt;p&gt;&lt;img alt="To Dos" src="/static/timeful_review_3.png" /&gt;&lt;/p&gt;
&lt;p&gt;Timeful helpfully shows me the things that I want to do over the course of time which is super helpful. But then there is the “not scheduled” bit on the screen below. I don’t quite know what my week is going to look like so it’s difficult to schedule it right now. Although as we can see above (and below) it’s clearly something I want to do every day. &lt;/p&gt;
&lt;p&gt;&lt;img alt="To Dos" src="/static/timeful_review_4.png" /&gt;&lt;/p&gt;
&lt;p&gt;Now I go to look at my schedule today. I can see what I need to be doing. Timeful automatically start throwing habits and tasks onto my calendar as suggestions. It’s fantastic. I’ve got a list of my to dos for the day and suggestions as to when they should be scheduled. I can see what tasks I need to start knocking out for the day and what are good times to do them.&lt;/p&gt;
&lt;p&gt;&lt;img alt="To Dos" src="/static/timeful_review_5.png" /&gt;&lt;/p&gt;
&lt;p&gt;My task “pay for school” shows up in both locations, at the top of the app and also has a recommended time on my calendar. This is ideal behavior because it shows that it’s still not nailed down yet (until I accept the time).&lt;/p&gt;
&lt;p&gt;But wait, what about my habits? Those are things I need to do today, but I can’t see them above. I have to scroll through the entire day to see if all my habits are there because they don’t show up on the list even if I haven’t accepted their time. Why is a declared daily habit not showing up in my daily to do list? It’s already something I told you I want to do every day and it shows up on the calendar but not in the list. Daily habits should show up on the day’s to do list in addition to the calendar. As we can see above, I told Timeful I want to do it every day, why doesn’t it show up on the list?&lt;/p&gt;
&lt;p&gt;An unscheduled daily habit is much closer to a to do for a day. It’s something that I need to get nailed down. But you won’t put it in the top of the list unless I do one of two things. (Go back to the habits screen and schedule it for today or click the recommended time and drag it to the top list.)&lt;/p&gt;
&lt;p&gt;&lt;img alt="To Dos" src="/static/timeful_review_6.png" /&gt;&lt;/p&gt;
&lt;p&gt;Unfortunately my other daily habit of “Programming” is nowhere to be seen. Programming is a daily habit that I want to put on my calendar. However it doesn’t show up in my unscheduled section nor is there a recommended time for me to do it because my schedule is filled with other recommendations from Timeful. Now I may not realize that I can exercise later if it gives me an uninterrupted block of programming at that time. The only way that I can see that my daily habit of programming is missing is by jumping back to the list screen and seeing that programming is “not scheduled”. But why should I have to schedule it? I already told Timeful I wanted to do it 7 times a week on every day of the week.&lt;/p&gt;
&lt;p&gt;So here’s the situational review.&lt;/p&gt;
&lt;p&gt;I have specified a habit as something that I would like to complete everyday. However that habit will only show up every day on my calendar if your algorithm determines that I have time to perform this activity. If it doesn’t then that habit may not happen, crippling the habit. Now this isn’t a nightmare, but I have to move back to another screen to see my list of habits, review them, click into it to schedule a session for today (remember you enforced me previously to say that I wanted to do it every day already) then it gets on that days to do list and I can now be looking at my calendar and all the things I have to do today. Rinse and repeat for each daily habit.&lt;/p&gt;
&lt;p&gt;The fix I propose is simple. Add any habit that is declared as scheduled for each day of the week to each day of the week’s to do list like a task (it can be the color red like a habit but you get the point). You could abstract this further so that any habit that is declared to be preferred on a specific day shows up in the to do list and the calendar recommendations for that specific day. (if I declare something I want to happen once a week on sundays, have it show up on the to do list on sundays, don’t force me to schedule it for next sunday every time).&lt;/p&gt;
&lt;p&gt;One should not have to schedule a habit for everyday of the week when you already declared that you want to do a habit everyday of the week.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The CEO of Timeful responded to my email in a professional manner and filled me in on some features that are up and coming. Definitely a company that is responsive to their users! My Hat is off to you &lt;a href="http://www.timeful.com"&gt;Timeful&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Bill Chambers</dc:creator><pubDate>Sun, 31 Aug 2014 00:00:00 +0200</pubDate><guid>tag:www.billchambers.me,2014-08-13:UX_Review_-_Timeful_App.html</guid><category>Product</category><category>UX</category><category>UI</category></item></channel></rss>